- var border = ""
 //- 生成一个随机的id
- var randomid = function(){
-    var chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';
-　　var maxPos = chars.length;
-　　var pwd = '';
-　　for (i = 0; i < 32; i++) {
-　　　　pwd += chars.charAt(Math.floor(Math.random() * maxPos));
-　　}
-　　return pwd;
- }
//- 判断获取值的结果，渲染到前端
- var getvalue = function(data){
-   if(data == undefined || data == "null"){
-        return "<p></p>";
-   }else if (data.length > 20) {
-       var id = randomid();
-       border += addborder(data,id);
-       return "<button data-id="+id+">点击小黑板看详细内容</button>";
-   }else{
-        return "<p>"+data+"</p>";
-   }
- }
//- 添加到popup上
- var addborder = function(data,id){
-    var html = "<div id="+id+" class='bodercast'><div class='box'><div class='close'><a>x</a></div><div class='content'><pre>"+ data +"</pre></div></div></div>";
-    return html;
- }
- function getJsontotalnum(jsonData){
-   var totalnum = 0;
-   for(var item in jsonData){
-        totalnum += parseInt(jsonData[item]);
-   }
-   return totalnum;
- }
- function getJsonLength(jsonData){
-   var jsonLength = 0;
-   for(var item in jsonData){
-        jsonLength++;
-   }
-   return jsonLength;
- }
//- 获取百分比得到柱状图
- var getpercent = function(object,totalnum){
-   var html = "";
-   var rate = 0;
-   var target = getJsonLength(object);
-   var L = target;
-   for(var name in object){
-      if(L === 1) {
-           rate = (object[name]/totalnum).toFixed(4);
-           rate = (100*rate)+"%";
-           html = "<div class='colnum'><p class='ratename'>"+ name +" </p><div class='box'><div class='percent' style='width:"+ rate +"'></div></div><p class='ratevalue'> "+ rate +"</p><div style='clear:both'></div></div>";
-      }else{
-           totalnum = getJsontotalnum(object);
-           rate = (object[name]/totalnum).toFixed(4);
-           rate = (100*rate).toFixed(2) + "%";
-           html += "<div class='colnum'><p class='ratename'>"+ name +" </p><div class='box'><div class='percent' style='width:"+ rate +"'></div></div><p class='ratevalue'> "+ rate +"</p><div style='clear:both'></div>";
-      }    
-   } 
-   return html;
- }

doctype html
html(lang="en")
    head
        meta(http-equiv="Content-Type",content="text/html; charset=UTF-8")
        meta(charset="UTF-8")
        meta(http-equiv="X-UA-Compatible",content="IE=Edge,chrome=1")
        meta(name="viewport",content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no")

        title= title

        link(rel='stylesheet', href='/stylesheets/style.css')
        link(rel='stylesheet', href='/stylesheets/component/icono.min.css')
        link(rel="stylesheet", href="/stylesheets/component/chosen.css")
        link(rel='stylesheet', href='/stylesheets/component/bootstrap.min.css')
        link(rel='stylesheet', href="/stylesheets/component/bootstrap-responsive.min.css")
        link(rel='stylesheet', href="/stylesheets/component/matrix-style.css")
        link(rel='stylesheet', href="/stylesheets/component/matrix-media.css")
        link(rel='stylesheet', href='/stylesheets/analyze.css')
    body
        #header
            h1
                a(href="")
                    | 严寒地区不同基质村镇绿色建筑体系发展目标与应用数据库

        #user-nav.navbar.navbar-inverse
            ul.nav
                li
                    a(href="/welcome")
                        span.text
                            | 首页
                li
                    a(href="/input/view/index")
                        span.text
                            | 录入
                li
                    a(href="/statistics/analyzelist")
                        span.text
                            | 分析
                li
                    a(href="/guide")
                        span.text
                            | 使用指南
                        
        #content
            #content-header
                #breadcrumb
                    a.tip-bottom(href="/statistics/analyzelist")
                        | 村镇列表
            .list-body
                .border
                    .content
                        h1
                            | 村镇信息
                        table
                            tbody
                                tr
                                    td
                                        p
                                            strong
                                                | 名字
                                    td
                                        p
                                            strong
                                                | 值
                                    td
                                        p
                                            strong
                                                | 分数
                                    td
                                        p
                                            strong
                                                | 数目
                                    td
                                        p
                                            strong
                                                | 匹配
                                    td
                                        p
                                            strong
                                                | judgeOutput
                                    td
                                        p
                                            strong
                                                | judgeReference
                            each cz in cunzhen
                                tr
                                    td
                                        !{getvalue(cz.namezh)}
                                    td
                                        !{getvalue(cz.value)}
                                    td
                                        !{getvalue(cz.score/cz.number)}
                                    td
                                        !{getvalue(cz.number)}
                                    td
                                        !{getvalue(cz.match)}
                                    td
                                        !{getvalue(cz.judgeOutput)}
                                    td
                                        !{getvalue(cz.judgeReference)}

                        h1
                            | 标志性构筑物
                        table
                            tbody
                                tr
                                    td
                                        p
                                            strong
                                                | 名字
                                    td
                                        p
                                            strong
                                                | 值
                                    td
                                        p
                                            strong
                                                | 分数
                                    td
                                        p
                                            strong
                                                | 数目
                                    td
                                        p
                                            strong
                                                | 匹配
                                    td
                                        p
                                            strong
                                                | judgeOutput
                                    td
                                        p
                                            strong
                                                | judgeReference
                                    td
                                        p
                                            strong
                                                | 比例
                            each bzxgzw in biaozhixinggouzhuwu
                                tr
                                    td
                                        !{getvalue(bzxgzw.namezh)}
                                    td
                                        !{getvalue(bzxgzw.value)}
                                    td
                                        !{getvalue(bzxgzw.score/bzxgzw.number)}
                                    td
                                        !{getvalue(bzxgzw.number)}
                                    td
                                        !{getvalue(bzxgzw.match)}
                                    td
                                        !{getvalue(bzxgzw.judgeOutput)}
                                    td
                                        !{getvalue(bzxgzw.judgeReference)}
                                    td
                                        !{getpercent(bzxgzw.percent,biaozhixinggouzhuwunum)}
                        h1
                            | 街道空间
                        table
                            tbody
                                tr
                                    td
                                        p
                                            strong
                                                | 名字
                                    td
                                        p
                                            strong
                                                | 值
                                    td
                                        p
                                            strong
                                                | 分数
                                    td
                                        p
                                            strong
                                                | 数目
                                    td
                                        p
                                            strong
                                                | 匹配
                                    td
                                        p
                                            strong
                                                | judgeOutput
                                    td
                                        p
                                            strong
                                                | judgeReference
                                    td
                                        p
                                            strong
                                                | 比例 
                            each jdkj in jiedaokongjian
                                tr
                                    td
                                        !{getvalue(jdkj.namezh)}
                                    td
                                        !{getvalue(jdkj.value)}
                                    td
                                        !{getvalue(jdkj.score/jdkj.number)}
                                    td
                                        !{getvalue(jdkj.number)}
                                    td
                                        !{getvalue(jdkj.match)}
                                    td
                                        !{getvalue(jdkj.judgeOutput)}
                                    td
                                        !{getvalue(jdkj.judgeReference)}
                                    td
                                        !{getpercent(jdkj.percent,jiedaokongjiannum)}
                        h1
                            | 开敞空间
                        table
                            tbody
                                tr
                                    td
                                        p
                                            strong
                                                | 名字
                                    td
                                        p
                                            strong
                                                | 值
                                    td
                                        p
                                            strong
                                                | 分数
                                    td
                                        p
                                            strong
                                                | 数目
                                    td
                                        p
                                            strong
                                                | 匹配
                                    td
                                        p
                                            strong
                                                | judgeOutput
                                    td
                                        p
                                            strong
                                                | judgeReference
                                    td
                                        p
                                            strong
                                                | 比例 
                            each kckj in kaichangkongjian
                                tr
                                    td
                                        !{getvalue(kckj.namezh)}
                                    td
                                        !{getvalue(kckj.value)}
                                    td
                                        !{getvalue(kckj.score/kckj.number)}
                                    td
                                        !{getvalue(kckj.number)}
                                    td
                                        !{getvalue(kckj.match)}
                                    td
                                        !{getvalue(kckj.judgeOutput)}
                                    td
                                        !{getvalue(kckj.judgeReference)}
                                    td
                                        !{getpercent(kckj.percent,kaichangkongjiannum)}
                        h1
                            | 庭院与建筑
                        table
                            tbody
                                tr
                                    td
                                        p
                                            strong
                                                | 名字
                                    td
                                        p
                                            strong
                                                | 值
                                    td
                                        p
                                            strong
                                                | 分数
                                    td
                                        p
                                            strong
                                                | 数目
                                    td
                                        p
                                            strong
                                                | 匹配
                                    td
                                        p
                                            strong
                                                | judgeOutput
                                    td
                                        p
                                            strong
                                                | judgeReference 
                                    td
                                        p
                                            strong
                                                | 比例
                            each tyyjz in tingyuanyujianzhu
                                tr
                                    td
                                        !{getvalue(tyyjz.namezh)}
                                    td
                                        !{getvalue(tyyjz.value)}
                                    td
                                        !{getvalue(tyyjz.score/tyyjz.number)}
                                    td
                                        !{getvalue(tyyjz.number)}
                                    td
                                        !{getvalue(tyyjz.match)}
                                    td
                                        !{getvalue(tyyjz.judgeOutput)}
                                    td
                                        !{getvalue(tyyjz.judgeReference)}
                                    td
                                        !{getpercent(tyyjz.percent,tingyuanyujianzhunum)}
            footer
                .pic
                    img(src="/logo.jpg")
                .content
                    p
                        | 版权所有：哈尔滨工业大学建筑学院城乡规划研究所 | 哈尔滨工业大学
                    p
                        | 本软件由“十二五”国家科技计划课题严寒地区绿色村镇体系建构与评价及关键技术（2013BAJ12B01）提供支持
                    p
                        | Copyright 2015 Urban and Town Planning Institute, School of Architecture HIT
        !{border}

        script(src="/script/excanvas.min.js")
        script(src="/script/jquery.min.js")
        script(src="/script/jquery.ui.custom.js")
        script(src="/script/bootstrap.min.js")
        script(src="/script/matrix.js")
        script.
            //- 对button按钮的监听
            var buttons = $('button');
            var bindevent = function(id,target){
                target.on('click',function(){
                    $("#"+id).css('display','block');
                    //- 关闭popup
                    $("#"+id+" .box .close a").on('click',function(){
                        $("#"+id).css('display','none');
                    });
                });
            }
            for(var i=0,L=buttons.length;i<L;i++){
                var target = $(buttons[i]);
                var id = target.data('id');
                bindevent(id,target);
            }
            

