// Generated by CoffeeScript 1.10.0
var List;

List = (function() {
  var addlist, getdatabyajax;

  function List(tablename1) {
    this.tablename = tablename1;
  }

  getdatabyajax = function(url) {
    return $.ajax({
      url: url,
      dataType: 'json',
      async: false
    }).done(function(data) {
      return data;
    }).fail(function() {
      return 0;
    });
  };

  addlist = function(data, tablename) {
    var d, html, i, j, k, len, len1, object, v;
    html = '';
    object = {};
    for (i = 0, len = data.length; i < len; i++) {
      d = data[i];
      if (object.hasOwnProperty(d.CZJBXXSuoShuZhenYu)) {
        object[d.CZJBXXSuoShuZhenYu].push({
          "name": "" + d.CZJBXXCunZhenMingChen,
          "id": "" + d.id
        });
      } else {
        object[d.CZJBXXSuoShuZhenYu] = [];
        object[d.CZJBXXSuoShuZhenYu].push({
          "name": "" + d.CZJBXXCunZhenMingChen,
          "id": "" + d.id
        });
      }
    }
    for (k in object) {
      v = object[k];
      html += "<li class='submenu'><a href='#'>" + k + "</a><ul>";
      for (j = 0, len1 = v.length; j < len1; j++) {
        d = v[j];
        html += "<li class='submenu'><a href='/statistics/analyze/" + d.id + "'>" + d.name + "</a>";
      }
      html += "</ul>";
    }
    return $('#sidebar ul').html(html);
  };

  List.prototype.init = function() {
    var data;
    data = getdatabyajax("/statistics/get/" + this.tablename).responseJSON;
    return addlist(data, this.tablename);
  };

  return List;

})();
